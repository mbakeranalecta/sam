<!--  This file is part of the SPFE Open Toolkit. See the accompanying license.txt file --><!--  for applicable licenses. --><!--  (c) Copyright Analecta Communications Inc. 2015 All Rights Reserved. --><!--  Need test for unicode characters and numbers in names. --><html xmlns:my="my:my">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="UTF-8">
</head>
<body>
<a name="top"></a><h1>SAM Parser Tests</h1>
<p>This document is the <span style="color: green">output</span>(foo of the test document processed by test.xslt. That stylesheet attempt to validate the outcome of tests by generating a string version of the markup under the <span style="color: green"><tt>markup:</tt></span> heading and comparing it to the text of the expected result as shown under the <span style="color: green"><tt>result:</tt></span> heading in the test file. This is not a perfect test. Two issues are known:</p>
<ol>
<li>
<p>Test are done on whitespace normalized versions of the XML markup strings. As such, they do not validly test situations where whitespace should be retained, such as in codeblocks and at the beginning of lines.</p>
</li>
<li>
<p>The SAM parser outputs attributes in alphabetical order. (From an XML point of view, the order of attributes does not matter.) Test should be written such that the attributes in the <span style="color: green"><tt>result:</tt></span> section are in alphabetical order. If not, the test will fail even though the XML is semantically identical.</p>
</li>
</ol>
<p>When running this test you should receive one SAM Parser Warning:</p>
<pre>
SAM parser warning: Unannotated phrase found: {should be reported} If you are trying to insert curly braces into the document, use \{should be reported}.
</pre>
<p>This is a test to make sure unannotated phrases are being reported correctly.</p>
<h2>Contents</h2>
<ul>
<li>
<a href="#idp384162596">Includes</a><ul>
<li><a href="#idp384164004">Simple include</a></li>
<li><a href="#idp384169764">Nested includes</a></li>
</ul>
</li>
<li>
<a href="#idp384180132">Blocks</a><ul>
<li><a href="#idp384177316">Language metadata</a></li>
<li><a href="#idp384184484">Escaping block syntax</a></li>
<li><a href="#idp384188324">Complex block structure</a></li>
<li><a href="#idp384206628">Paragraph with colon in first word</a></li>
</ul>
</li>
<li>
<a href="#idp384079396">Fields</a><ul><li><a href="#idp384086180">Nested fields</a></li></ul>
</li>
<li>
<a href="#idp384081060">Paragraphs</a><ul>
<li><a href="#idp384094500">Paragraph</a></li>
<li><a href="#idp384094244">With annotated phrase</a></li>
</ul>
</li>
<li>
<a href="#idp384101284">Ordered lists</a><ul>
<li><a href="#idp384099108">Ordered list with spaces</a></li>
<li><a href="#idp383837556">Ordered list no spaces</a></li>
<li><a href="#idp383842420">Ordered list mixed spacing</a></li>
<li><a href="#idp383856628">Nested ordered list with spaces</a></li>
<li><a href="#idp383859060">Nested ordered lists with no spaces</a></li>
<li><a href="#idp383871988">Nested ordered list with mixed spacing</a></li>
</ul>
</li>
<li>
<a href="#idp383879796">Unordered lists</a><ul>
<li><a href="#idp383880436">Unordered list with spaces</a></li>
<li><a href="#idp383890420">Unordered list no spaces</a></li>
<li><a href="#idp383898100">Unordered list mixed spacing</a></li>
<li><a href="#idp383900020">Nested list with spaces</a></li>
<li><a href="#idp384037348">Nested unordered list with no spaces</a></li>
<li><a href="#idp384061924">Nested unordered list with mixed spacing</a></li>
</ul>
</li>
<li>
<a href="#idp383952612">Mixed lists</a><ul>
<li><a href="#idp383959140">Nested mixed lists with spaces</a></li>
<li><a href="#idp383986148">Nested mixed lists with no spaces</a></li>
<li><a href="#idp384512180">Nested numbered lists with mixed spacing</a></li>
<li><a href="#idp384513204">Space between lists</a></li>
<li><a href="#idp384525236">No space between lists</a></li>
</ul>
</li>
<li>
<a href="#idp384530996">Literal lists</a><ul>
<li><a href="#idp384533940">Literal numbered list using \ to escape .</a></li>
<li><a href="#idp384541748">Literal unordered list using \ to escape *</a></li>
</ul>
</li>
<li>
<a href="#idp384547636">Labeled lists</a><ul>
<li><a href="#idp384548148">Simple labeled list</a></li>
<li><a href="#idp384566708">XML markup characters in list labels</a></li>
</ul>
</li>
<li>
<a href="#idp384573620">Record sets</a><ul>
<li><a href="#idp384577076">Recordset</a></li>
<li><a href="#idp384582068">Recordset with only one field name</a></li>
</ul>
</li>
<li>
<a href="#idp384585908">Grids</a><ul>
<li><a href="#idp384587316">Grid with heads</a></li>
<li><a href="#idp384602932">Grid with management domain attributes</a></li>
<li><a href="#idp384608436">Grid with bold row</a></li>
<li><a href="#idp384616116">Grid with side heads</a></li>
</ul>
</li>
<li>
<a href="#idp384632756">Blockquotes</a><ul>
<li><a href="#idp384632884">Blockquote</a></li>
<li><a href="#idp384642356">Alternate block quote</a></li>
</ul>
</li>
<li>
<a href="#idp384640820">Codeblocks</a><ul>
<li><a href="#idp384645044">Simple codeblock</a></li>
<li><a href="#idp384649524">Blank lines in codeblock</a></li>
<li><a href="#idp384656564">Invalid blockstart in codeblock</a></li>
</ul>
</li>
<li>
<a href="#idp384653364">Lines</a><ul>
<li><a href="#idp384667060">Lines</a></li>
<li><a href="#idp384663220">Lines inside a blockquote</a></li>
</ul>
</li>
<li>
<a href="#idp384674356">Attributes</a><ul>
<li><a href="#idp384678324">Attributes on block</a></li>
<li><a href="#idp384690356">Attributes on field</a></li>
<li><a href="#idp384687924">Attributes on fragment</a></li>
<li><a href="#idp384700980">attributes on grid</a></li>
<li><a href="#idp384703412">attributes on record set</a></li>
<li><a href="#idp384704564">Attributes on unordered list</a></li>
<li><a href="#idp384450356">Attributes on ordered list</a></li>
<li><a href="#idp384458932">Attributes on lines</a></li>
<li><a href="#idp384469172">Attributes on blockquote</a></li>
<li><a href="#idp384479156">Attributes on a phrase</a></li>
<li><a href="#idp384479540">Attributes on a codeblock</a></li>
<li><a href="#idp384487476">Attributes on an embed</a></li>
<li><a href="#idp384494132">Attributes on inserts</a></li>
</ul>
</li>
<li>
<a href="#idp384494004">Annotations</a><ul>
<li><a href="#idp384495412">Multiple annotations</a></li>
<li><a href="#idp384499508">Consecutive Annotations</a></li>
<li><a href="#idp384862868">Annotation followed by citation</a></li>
<li><a href="#idp384873492">Annotation with language metadata</a></li>
<li><a href="#idp384874132">Annotation with a condition</a></li>
<li><a href="#idp384875028">Prior annotation lookup</a></li>
<li><a href="#idp384883860">Prior annotation lookup in included file</a></li>
<li><a href="#idp384882836">Earlier para</a></li>
<li><a href="#idp384895892">Failure</a></li>
</ul>
</li>
<li>
<a href="#idp384897172">Links</a><ul>
<li><a href="#idp384902676">Parens not escaped</a></li>
<li><a href="#idp384903828">Parens escaped with backslashes</a></li>
<li><a href="#idp384908308">Using explicit link annotation instead of shortcut</a></li>
</ul>
</li>
<li>
<a href="#idp384920084">Citations</a><ul>
<li><a href="#idp384922132">Citation on phrase</a></li>
<li><a href="#idp384916884">Literal square brackets</a></li>
<li><a href="#idp384927124">Multiple citations is a paragraph</a></li>
</ul>
</li>
<li>
<a href="#idp384936084">Characters</a><ul>
<li><a href="#idp384933524">HTML named entities</a></li>
<li><a href="#idp384933780">Numeric entities</a></li>
<li><a href="#idp384943508">Hexadecimal entity</a></li>
<li><a href="#idp384945940">Character entities inside phrases and decorations</a></li>
<li><a href="#idp384952212">In code annotation shortcut:</a></li>
<li><a href="#idp384959380">In bold decoration escaped:</a></li>
<li><a href="#idp384961940">Ampersand in a sentence, escaped with \ and not escaped.</a></li>
</ul>
</li>
<li>
<a href="#idp384969748">Character escapes</a><ul>
<li><a href="#idp384967956">Escapes in explicit annotations</a></li>
<li><a href="#idp384978068">Escapes in code decorations</a></li>
<li><a href="#idp384978964">Escapes in decorations</a></li>
<li><a href="#idp384986644">XML reserved characters in citation specifically attribute</a></li>
</ul>
</li>
<li>
<a href="#idp384996244">Conditions</a><ul>
<li><a href="#idp384994452">Conditions on unordered list shortcut</a></li>
<li><a href="#idp384997780">Conditions on ordered list shortcut</a></li>
</ul>
</li>
<li>
<a href="#idp385007380">Block inserts</a><ul>
<li><a href="#idp385005588">Image insert</a></li>
<li><a href="#idp385006100">Key insert</a></li>
</ul>
</li>
<li>
<a href="#idp385014676">Inline inserts</a><ul>
<li><a href="#idp385019540">Inline inserts</a></li>
<li><a href="#idp385022356">Paragraph that is just an inline insert</a></li>
</ul>
</li>
<li>
<a href="#idp385033748">Strings</a><ul>
<li><a href="#idp385034388">String definition</a></li>
<li><a href="#idp385035668">String references</a></li>
</ul>
</li>
<li>
<a href="#idp385045524">Fragments</a><ul>
<li><a href="#idp385044756">Fragment</a></li>
<li><a href="#idp384792084">Insert a fragment</a></li>
</ul>
</li>
<li>
<a href="#idp384791700">XML fragments</a><ul><li><a href="#idp384787604">XML fragment</a></li></ul>
</li>
<li>
<a href="#idp384798100">Smart quotes</a><ul>
<li><a href="#idp384807316">Smart quotes</a></li>
<li><a href="#idp384806932">Following an annotation</a></li>
<li><a href="#idp384813972">Smart quotes with annotations</a></li>
<li><a href="#idp384813588">Adjacent to parentheses</a></li>
<li><a href="#idp384820884">Close quote followed by citation.</a></li>
<li><a href="#idp384823444">Miscellaneous cases</a></li>
<li><a href="#idp384832148">Escaped dumb quotes</a></li>
<li><a href="#idp384841108">Em and en dashes</a></li>
</ul>
</li>
</ul>
<h2 id="idp384162596">Test: Includes</h2>

<p>Include content from another SAM file.</p>


<h3 id="idp384164004">Case: Simple include</h3>

<p>An include statement.</p>

<h4>Source</h4>
<pre>
&lt;&lt;&lt;(C:\Users\Mark\sam\includeme.sam)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<message>
<title>Hello World.</title>
<p>This is the include test file.</p>
<table border="1">
<tr>
<td>foo</td>
<td>bar</td>
</tr>
<tr>
<td>baz</td>
<td>bat</td>
</tr>
</table>
<p>Annotation lookup test: <span style="color: green"><span style="color: red">test phrase</span></span>.</p>
</message>

<h4>Intended output (space normalized)</h4>
<pre>&lt;message&gt; &lt;title&gt;Hello World.&lt;/title&gt; &lt;p&gt;This is the include test file.&lt;/p&gt; &lt;grid&gt; &lt;row&gt; &lt;cell&gt;foo&lt;/cell&gt; &lt;cell&gt;bar&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;baz&lt;/cell&gt; &lt;cell&gt;bat&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt; &lt;p&gt;Annotation lookup test: &lt;phrase&gt;&lt;annotation type="test"&gt;test phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt; &lt;/message&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;message&gt; &lt;title&gt;Hello World.&lt;/title&gt; &lt;p&gt;This is the include test file.&lt;/p&gt; &lt;grid&gt; &lt;row&gt; &lt;cell&gt;foo&lt;/cell&gt; &lt;cell&gt;bar&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;baz&lt;/cell&gt; &lt;cell&gt;bat&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt; &lt;p&gt;Annotation lookup test: &lt;phrase&gt;&lt;annotation type="test"&gt;test phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt; &lt;/message&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384169764">Case: Nested includes</h3>

<p>Including a file that itself includes a file.</p>

<h4>Source</h4>
<pre>
&lt;&lt;&lt;(file:///C:/Users/Mark/sam/includeme1.sam)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<message>
<p>This file includes another file.</p>
<p>Nested includes work! Yipee!</p>
</message>

<h4>Intended output (space normalized)</h4>
<pre>&lt;message&gt; &lt;p&gt;This file includes another file.&lt;/p&gt; &lt;p&gt;Nested includes work! Yipee!&lt;/p&gt; &lt;/message&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;message&gt; &lt;p&gt;This file includes another file.&lt;/p&gt; &lt;p&gt;Nested includes work! Yipee!&lt;/p&gt; &lt;/message&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384180132">Test: Blocks</h2>

<p>Blocks are the basic building block of a SAM file. This whole document is a test case for blocks.</p>


<h3 id="idp384177316">Case: Language metadata</h3>

<p>A block with language metadata.</p>

<h4>Source</h4>
<pre>
section:(!sp)
    Feliz Navidad
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<section xml:lang="sp">
<p>Feliz Navidad</p>
</section>

<h4>Intended output (space normalized)</h4>
<pre>&lt;section xml:lang="sp"&gt; &lt;p&gt;Feliz Navidad&lt;/p&gt; &lt;/section&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;section xml:lang="sp"&gt; &lt;p&gt;Feliz Navidad&lt;/p&gt; &lt;/section&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384184484">Case: Escaping block syntax</h3>

<p>Escape colon to prevent single word followed by colon being recognized as a block.</p>

<h4>Source</h4>
<pre>
and\:
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>and:</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;and:&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;and:&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384188324">Case: Complex block structure</h3>

<p>A complex block with various structures inside.</p>

<h4>Source</h4>
<pre>
document:
    head:(#foo)
        foo: barney {and}(conjunction) betty
        baz: bat
        $name=fred {and}(conjunction) wilma
        history:: date, author, comment, status
            2014-06-23, mbaker, New\, Topic, In progress
            2016-07-01, mbaker, Revision, In progress
        index:: type, term
            feature, fragment
            feature, fragments
    body: How Fragments Work
        Stuff on how fragments work.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<document>
<head name="foo">
<foo>barney <span style="color: green"><span style="color: red">and</span></span> betty</foo>
<baz>bat</baz>
<string name="name">fred <span style="color: green"><span style="color: red">and</span></span> wilma</string>
<history>
<row>
<date>2014-06-23</date>
<author>mbaker</author>
<comment>New, Topic</comment>
<status>In progress</status>
</row>
<row>
<date>2016-07-01</date>
<author>mbaker</author>
<comment>Revision</comment>
<status>In progress</status>
</row>
</history>
<index>
<row>
<type>feature</type>
<term>fragment</term>
</row>
<row>
<type>feature</type>
<term>fragments</term>
</row>
</index>
</head>
<body>
<title>How Fragments Work</title>
<p>Stuff on how fragments work.</p>
</body>
</document>

<h4>Intended output (space normalized)</h4>
<pre>&lt;document&gt; &lt;head name="foo"&gt; &lt;foo&gt;barney &lt;phrase&gt;&lt;annotation type="conjunction"&gt;and&lt;/annotation&gt;&lt;/phrase&gt; betty&lt;/foo&gt; &lt;baz&gt;bat&lt;/baz&gt; &lt;string name="name"&gt;fred &lt;phrase&gt;&lt;annotation type="conjunction"&gt;and&lt;/annotation&gt;&lt;/phrase&gt; wilma&lt;/string&gt; &lt;history&gt; &lt;row&gt; &lt;date&gt;2014-06-23&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;New, Topic&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/row&gt; &lt;row&gt; &lt;date&gt;2016-07-01&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;Revision&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/row&gt; &lt;/history&gt; &lt;index&gt; &lt;row&gt; &lt;type&gt;feature&lt;/type&gt; &lt;term&gt;fragment&lt;/term&gt; &lt;/row&gt; &lt;row&gt; &lt;type&gt;feature&lt;/type&gt; &lt;term&gt;fragments&lt;/term&gt; &lt;/row&gt; &lt;/index&gt; &lt;/head&gt; &lt;body&gt; &lt;title&gt;How Fragments Work&lt;/title&gt; &lt;p&gt;Stuff on how fragments work.&lt;/p&gt; &lt;/body&gt; &lt;/document&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;document&gt; &lt;head name="foo"&gt; &lt;foo&gt;barney &lt;phrase&gt;&lt;annotation type="conjunction"&gt;and&lt;/annotation&gt;&lt;/phrase&gt; betty&lt;/foo&gt; &lt;baz&gt;bat&lt;/baz&gt; &lt;string name="name"&gt;fred &lt;phrase&gt;&lt;annotation type="conjunction"&gt;and&lt;/annotation&gt;&lt;/phrase&gt; wilma&lt;/string&gt; &lt;history&gt; &lt;row&gt; &lt;date&gt;2014-06-23&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;New, Topic&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/row&gt; &lt;row&gt; &lt;date&gt;2016-07-01&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;Revision&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/row&gt; &lt;/history&gt; &lt;index&gt; &lt;row&gt; &lt;type&gt;feature&lt;/type&gt; &lt;term&gt;fragment&lt;/term&gt; &lt;/row&gt; &lt;row&gt; &lt;type&gt;feature&lt;/type&gt; &lt;term&gt;fragments&lt;/term&gt; &lt;/row&gt; &lt;/index&gt; &lt;/head&gt; &lt;body&gt; &lt;title&gt;How Fragments Work&lt;/title&gt; &lt;p&gt;Stuff on how fragments work.&lt;/p&gt; &lt;/body&gt; &lt;/document&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384206628">Case: Paragraph with colon in first word</h3>

<p>Case related to issue #94.</p>

<h4>Source</h4>
<pre>
article: Foo

    foo{bar}(http://www.example.com/).

    `foo::bar` baz.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<article>
<title>Foo</title>
<p>foo<span style="color: green"><a href="http://www.example.com/">bar</a></span>.</p>
<p><span style="color: green"><tt>foo::bar</tt></span> baz.</p>
</article>

<h4>Intended output (space normalized)</h4>
<pre>&lt;article&gt; &lt;title&gt;Foo&lt;/title&gt; &lt;p&gt;foo&lt;phrase&gt;&lt;annotation type="link" specifically="http://www.example.com/"&gt;bar&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="code"&gt;foo::bar&lt;/annotation&gt;&lt;/phrase&gt; baz.&lt;/p&gt; &lt;/article&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;article&gt; &lt;title&gt;Foo&lt;/title&gt; &lt;p&gt;foo&lt;phrase&gt;&lt;annotation type="link" specifically="http://www.example.com/"&gt;bar&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="code"&gt;foo::bar&lt;/annotation&gt;&lt;/phrase&gt; baz.&lt;/p&gt; &lt;/article&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384079396">Test: Fields</h2>

<p>A field is a block without children. A field value does not get wrapped in a title element. It is simple the value of the field.</p>


<h3 id="idp384086180">Case: Nested fields</h3>

<p>Nested fields. Anything with a child, of course, is a block, not a field.</p>

<h4>Source</h4>
<pre>
address:
    name: Fred Flintstone
    address: Bedrock
    era: Stone Age
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<address>
<name>Fred Flintstone</name>
<address>Bedrock</address>
<era>Stone Age</era>
</address>

<h4>Intended output (space normalized)</h4>
<pre>&lt;address&gt; &lt;name&gt;Fred Flintstone&lt;/name&gt; &lt;address&gt;Bedrock&lt;/address&gt; &lt;era&gt;Stone Age&lt;/era&gt; &lt;/address&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;address&gt; &lt;name&gt;Fred Flintstone&lt;/name&gt; &lt;address&gt;Bedrock&lt;/address&gt; &lt;era&gt;Stone Age&lt;/era&gt; &lt;/address&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384081060">Test: Paragraphs</h2>

<p>A paragraph is a block of text over consecutive lines.</p>


<h3 id="idp384094500">Case: Paragraph</h3>

<p>A simple multi-line paragraph ending with a blank space.</p>

<h4>Source</h4>
<pre>
Wafting zephyrs
quickly vexed
Jumbo.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Wafting zephyrs quickly vexed Jumbo.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Wafting zephyrs quickly vexed Jumbo.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Wafting zephyrs quickly vexed Jumbo.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384094244">Case: With annotated phrase</h3>

<p>A paragraph over multiple lines with an annotated phrase.</p>

<h4>Source</h4>
<pre>
This is a {paragraph}(foo)
that wraps across
multiple lines.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This is a <span style="color: green"><span style="color: red">paragraph</span></span> that wraps across multiple lines.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This is a &lt;phrase&gt;&lt;annotation type="foo"&gt;paragraph&lt;/annotation&gt;&lt;/phrase&gt; that wraps across multiple lines.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This is a &lt;phrase&gt;&lt;annotation type="foo"&gt;paragraph&lt;/annotation&gt;&lt;/phrase&gt; that wraps across multiple lines.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384101284">Test: Ordered lists</h2>

<p>Ordered lists are created by starting a line with a number followed by a period. Exact numbers are not retained.</p>


<h3 id="idp384099108">Case: Ordered list with spaces</h3>

<p>Ordered lists can have blank lines between the items.</p>

<h4>Source</h4>
<pre>
0. One

0. Two

99999. Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two</p>
</li>
<li>
<p>Three</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383837556">Case: Ordered list no spaces</h3>

<p>List are also recognized without space between items. List items can wrap to another line if more indented than the number. Additional paragraphs can be included if more indented than the number.</p>

<h4>Source</h4>
<pre>
0. One
0. Two this
   paragraph wraps.

   This is another para in the list item.
99999. Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two this paragraph wraps.</p>
<p>This is another para in the list item.</p>
</li>
<li>
<p>Three</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two this paragraph wraps.&lt;/p&gt; &lt;p&gt;This is another para in the list item.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two this paragraph wraps.&lt;/p&gt; &lt;p&gt;This is another para in the list item.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383842420">Case: Ordered list mixed spacing</h3>

<p>Ordered list with inconsistent spacing.</p>

<h4>Source</h4>
<pre>
0. One

0. Two
99999. Three

7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two</p>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383856628">Case: Nested ordered list with spaces</h3>

<p>Ordered lists at different indents, with spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One

0. Two x

    5. Two and a quarter x

    6. Two and a half

    9. Two and three quarters

99999. Three

7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two x</p>
<ol>
<li>
<p>Two and a quarter x</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ol>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two x&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter x&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two x&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter x&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383859060">Case: Nested ordered lists with no spaces</h3>

<p>Ordered lists at different indents, with no spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One
0. Two z
    5. Two and a quarter z
    6. Two and a half
    9. Two and three quarters
99999. Three
7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two z</p>
<ol>
<li>
<p>Two and a quarter z</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ol>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two z&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter z&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two z&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter z&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383871988">Case: Nested ordered list with mixed spacing</h3>

<p>Ordered lists at different indents, with some spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One
0. Two r
    5. Two and a quarter r

    6. Two and a half
    9. Two and three quarters

99999. Three

7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two r</p>
<ol>
<li>
<p>Two and a quarter r</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ol>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two r&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter r&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two r&lt;/p&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;Two and a quarter r&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp383879796">Test: Unordered lists</h2>

<p>Unordered lists are indicated by starting a line with <span style="color: green"><tt>*</tt></span>.</p>


<h3 id="idp383880436">Case: Unordered list with spaces</h3>

<p>A list with spaces between the lines.</p>

<h4>Source</h4>
<pre>
* One

* Two t

* Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two t</p>
</li>
<li>
<p>Three</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two t&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two t&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383890420">Case: Unordered list no spaces</h3>

<p>A list with no spaces between the lines.</p>

<h4>Source</h4>
<pre>
* One
* Two y
* Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two y</p>
</li>
<li>
<p>Three</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two y&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two y&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383898100">Case: Unordered list mixed spacing</h3>

<p>A list with mixed spacing between the lines.</p>

<h4>Source</h4>
<pre>
* One
* Two u

* Three
* Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two u</p>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two u&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two u&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383900020">Case: Nested list with spaces</h3>

<p>Nested lists separated by spaces.</p>

<h4>Source</h4>
<pre>
* One

* Two i

    * Two and a quarter

    * Two and a half

    * Two and three quarters

* Three

* Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two i</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two i&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two i&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384037348">Case: Nested unordered list with no spaces</h3>

<p>Nested lists not separated by spaces.</p>

<h4>Source</h4>
<pre>
* One
* Two k
    * Two and a quarter
    * Two and a half
    * Two and three quarters
* Three
* Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two k</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two k&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two k&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384061924">Case: Nested unordered list with mixed spacing</h3>

<p>Nested lists separated by some spaces.</p>

<h4>Source</h4>
<pre>
* One
* Two p
    * Two and a quarter p

    * Two and a half
    * Two and three quarters

* Three
* Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two p</p>
<ul>
<li>
<p>Two and a quarter p</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two p&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter p&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two p&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter p&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp383952612">Test: Mixed lists</h2>

<p>You can nest ordered and unordered lists inside each other or follow a list of one type with a list of another type.</p>


<h3 id="idp383959140">Case: Nested mixed lists with spaces</h3>

<p>Unordered inside ordered list, spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One

0. Two a

    * Two and a quarter

    * Two and a half

    * Two and three quarters

99999. Three

7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two a</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two a&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two a&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp383986148">Case: Nested mixed lists with no spaces</h3>

<p>Unordered inside ordered list, no spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One
0. Two s
    * Two and a quarter
    * Two and a half
    * Two and three quarters
99999. Three
7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two s</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two s&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two s&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384512180">Case: Nested numbered lists with mixed spacing</h3>

<p>Unordered inside ordered list, some spaces between lines.</p>

<h4>Source</h4>
<pre>
0. One

0. Two d
    * Two and a quarter

    * Two and a half
    * Two and three quarters
99999. Three times
       three is nine.

       Four times four is sixteen.

       Five time five is twenty five.


7. Four
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two d</p>
<ul>
<li>
<p>Two and a quarter</p>
</li>
<li>
<p>Two and a half</p>
</li>
<li>
<p>Two and three quarters</p>
</li>
</ul>
</li>
<li>
<p>Three times three is nine.</p>
<p>Four times four is sixteen.</p>
<p>Five time five is twenty five.</p>
</li>
<li>
<p>Four</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two d&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three times three is nine.&lt;/p&gt; &lt;p&gt;Four times four is sixteen.&lt;/p&gt; &lt;p&gt;Five time five is twenty five.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two d&lt;/p&gt; &lt;ul&gt; &lt;li&gt; &lt;p&gt;Two and a quarter&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and a half&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two and three quarters&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three times three is nine.&lt;/p&gt; &lt;p&gt;Four times four is sixteen.&lt;/p&gt; &lt;p&gt;Five time five is twenty five.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Four&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384513204">Case: Space between lists</h3>

<p>An ordered list can follow an unordered list directly and vice versa.</p>

<h4>Source</h4>
<pre>
* One
* Two f
* Three

1. One
2. Two g
3. Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two f</p>
</li>
<li>
<p>Three</p>
</li>
</ul>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two g</p>
</li>
<li>
<p>Three</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two f&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two g&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two f&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two g&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384525236">Case: No space between lists</h3>

<p>An unordered list followed by an ordered list with no space between them.</p>

<h4>Source</h4>
<pre>
* One
* Two h
* Three
1. One
2. Two j
3. Three
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>One</p>
</li>
<li>
<p>Two h</p>
</li>
<li>
<p>Three</p>
</li>
</ul>
<ol>
<li>
<p>One</p>
</li>
<li>
<p>Two j</p>
</li>
<li>
<p>Three</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two h&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two j&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two h&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt; &lt;ol&gt; &lt;li&gt; &lt;p&gt;One&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Two j&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Three&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384530996">Test: Literal lists</h2>

<p>Ordered lists have the number stripped away and are renumbered on output. Unordered list have their <span style="color: green"><tt>*</tt></span> stripped away and replaced with the style of bullet specified on output processing. If you want to preserve actual numbers and bullets in your lists, you need to escape them so that the lines are not recognized as lists items.</p>


<h3 id="idp384533940">Case: Literal numbered list using <span style="color: green"><tt>\</tt></span> to escape <span style="color: green"><tt>.</tt></span>
</h3>

<p>To have a list number recognized as a literal, escape the period following the number (not the number itself). Because these are now paragraphs, not lists, you must put spaces between items or they will be run together into one paragraph.</p>

<h4>Source</h4>
<pre>
2\. This is just a paragraph

4\. This is just a paragraph

9\. This is just a paragraph
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>2. This is just a paragraph</p>
<p>4. This is just a paragraph</p>
<p>9. This is just a paragraph</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;2. This is just a paragraph&lt;/p&gt; &lt;p&gt;4. This is just a paragraph&lt;/p&gt; &lt;p&gt;9. This is just a paragraph&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;2. This is just a paragraph&lt;/p&gt; &lt;p&gt;4. This is just a paragraph&lt;/p&gt; &lt;p&gt;9. This is just a paragraph&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384541748">Case: Literal unordered list using <span style="color: green"><tt>\</tt></span> to escape <span style="color: green"><tt>*</tt></span>
</h3>

<p>To have a list number recognized as a literal, escape the <span style="color: green"><tt>*</tt></span>. Because these are now paragraphs, not lists, you must put spaces between items or they will be run together into one paragraph.</p>

<h4>Source</h4>
<pre>
\* This is just a paragraph

\* This is just a paragraph

\* This is just a paragraph
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>* This is just a paragraph</p>
<p>* This is just a paragraph</p>
<p>* This is just a paragraph</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;* This is just a paragraph&lt;/p&gt; &lt;p&gt;* This is just a paragraph&lt;/p&gt; &lt;p&gt;* This is just a paragraph&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;* This is just a paragraph&lt;/p&gt; &lt;p&gt;* This is just a paragraph&lt;/p&gt; &lt;p&gt;* This is just a paragraph&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384547636">Test: Labeled lists</h2>

<p>You can create lists with labels rather than bullets. The label is contained between two pipe characters. There must be no space between the opening pipe and the first character of the label (otherwise it will be parsed as a line).</p>


<h3 id="idp384548148">Case: Simple labeled list</h3>

<p>A labeled list.</p>

<h4>Source</h4>
<pre>
|Do| a deer,
a female deer
|Re| a drop of
     golden sun

     Is it a particle or a wave?
|Me| a name I call myself
|Fa| a long long way to run
|So| a needle pulling thread
|La| a note to follow so
|Te| a drink with jam and bread
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>



<p><b>Do: </b>a deer, a female deer</p>



<p><b>Re: </b>a drop of golden sun</p>
<p>Is it a particle or a wave?</p>



<p><b>Me: </b>a name I call myself</p>



<p><b>Fa: </b>a long long way to run</p>



<p><b>So: </b>a needle pulling thread</p>



<p><b>La: </b>a note to follow so</p>



<p><b>Te: </b>a drink with jam and bread</p>



<h4>Intended output (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li&gt; &lt;label&gt;Do&lt;/label&gt; &lt;p&gt;a deer, a female deer&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Re&lt;/label&gt; &lt;p&gt;a drop of golden sun&lt;/p&gt; &lt;p&gt;Is it a particle or a wave?&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Me&lt;/label&gt; &lt;p&gt;a name I call myself&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Fa&lt;/label&gt; &lt;p&gt;a long long way to run&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;So&lt;/label&gt; &lt;p&gt;a needle pulling thread&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;La&lt;/label&gt; &lt;p&gt;a note to follow so&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Te&lt;/label&gt; &lt;p&gt;a drink with jam and bread&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li&gt; &lt;label&gt;Do&lt;/label&gt; &lt;p&gt;a deer, a female deer&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Re&lt;/label&gt; &lt;p&gt;a drop of golden sun&lt;/p&gt; &lt;p&gt;Is it a particle or a wave?&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Me&lt;/label&gt; &lt;p&gt;a name I call myself&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Fa&lt;/label&gt; &lt;p&gt;a long long way to run&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;So&lt;/label&gt; &lt;p&gt;a needle pulling thread&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;La&lt;/label&gt; &lt;p&gt;a note to follow so&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;Te&lt;/label&gt; &lt;p&gt;a drink with jam and bread&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384566708">Case: XML markup characters in list labels</h3>

<p>Making sure that the contents of a list label are properly escaped when generating XML.</p>

<h4>Source</h4>
<pre>
|foo1 &amp; bar1| foobar1
|foo2 &amp; bar2| foobar2
|foo3 &amp; bar3| foobar3
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>



<p><b>foo1 &amp; bar1: </b>foobar1</p>



<p><b>foo2 &amp; bar2: </b>foobar2</p>



<p><b>foo3 &amp; bar3: </b>foobar3</p>



<h4>Intended output (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li&gt; &lt;label&gt;foo1 &amp;amp; bar1&lt;/label&gt; &lt;p&gt;foobar1&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;foo2 &amp;amp; bar2&lt;/label&gt; &lt;p&gt;foobar2&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;foo3 &amp;amp; bar3&lt;/label&gt; &lt;p&gt;foobar3&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ll&gt; &lt;li&gt; &lt;label&gt;foo1 &amp;amp; bar1&lt;/label&gt; &lt;p&gt;foobar1&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;foo2 &amp;amp; bar2&lt;/label&gt; &lt;p&gt;foobar2&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;label&gt;foo3 &amp;amp; bar3&lt;/label&gt; &lt;p&gt;foobar3&lt;/p&gt; &lt;/li&gt; &lt;/ll&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384573620">Test: Record sets</h2>

<p>Record sets are a structure similar to a database table. They record data in rows with identical column names. Column names are specified in the records set header.</p>


<h3 id="idp384577076">Case: Recordset</h3>

<p>Test that recordsets are recognized correctly. Includes a test that character escapes are recognized in records and commas can be escaped.</p>

<h4>Source</h4>
<pre>
history:: date, author, comment, status
    2014-06-23, mbaker, New\, Topic, In progress
    2016-07-01, mbaker, Revision, In progress
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<history>
<row>
<date>2014-06-23</date>
<author>mbaker</author>
<comment>New, Topic</comment>
<status>In progress</status>
</row>
<row>
<date>2016-07-01</date>
<author>mbaker</author>
<comment>Revision</comment>
<status>In progress</status>
</row>
</history>

<h4>Intended output (space normalized)</h4>
<pre>&lt;history&gt; &lt;row&gt; &lt;date&gt;2014-06-23&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;New, Topic&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/row&gt; &lt;row&gt; &lt;date&gt;2016-07-01&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;Revision&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/row&gt; &lt;/history&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;history&gt; &lt;row&gt; &lt;date&gt;2014-06-23&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;New, Topic&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/row&gt; &lt;row&gt; &lt;date&gt;2016-07-01&lt;/date&gt; &lt;author&gt;mbaker&lt;/author&gt; &lt;comment&gt;Revision&lt;/comment&gt; &lt;status&gt;In progress&lt;/status&gt; &lt;/row&gt; &lt;/history&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384582068">Case: Recordset with only one field name</h3>

<p>Test that a recordset works correctly with only one field.</p>

<h4>Source</h4>
<pre>
filmography:: film
    Rio Bravo
    The Shootish
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<filmography>
<row>
<film>Rio Bravo</film>
</row>
<row>
<film>The Shootish</film>
</row>
</filmography>

<h4>Intended output (space normalized)</h4>
<pre>&lt;filmography&gt; &lt;row&gt; &lt;film&gt;Rio Bravo&lt;/film&gt; &lt;/row&gt; &lt;row&gt; &lt;film&gt;The Shootish&lt;/film&gt; &lt;/row&gt; &lt;/filmography&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;filmography&gt; &lt;row&gt; &lt;film&gt;Rio Bravo&lt;/film&gt; &lt;/row&gt; &lt;row&gt; &lt;film&gt;The Shootish&lt;/film&gt; &lt;/row&gt; &lt;/filmography&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384585908">Test: Grids</h2>

<p>Grids are a simple form of table. They are purely a layout device with no semantic value. They have no table heads or row or column spanning. More complex tables can be modeled using explicit blocks. Labeled lists can be modeled using the labeled list structure. Database-like tables can be modeled using record sets.</p>


<h3 id="idp384587316">Case: Grid with heads</h3>

<p>Table heads are simulated using bold in the top row of the grid.</p>

<h4>Source</h4>
<pre>
+++
    *Type*  | *Term*    | *Notes*
    feature | fragment  | bing
    feature | fragments | bang
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td><span style="color: green"><b>Type</b></span></td>
<td><span style="color: green"><b>Term</b></span></td>
<td><span style="color: green"><b>Notes</b></span></td>
</tr>
<tr>
<td>feature</td>
<td>fragment</td>
<td>bing</td>
</tr>
<tr>
<td>feature</td>
<td>fragments</td>
<td>bang</td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384602932">Case: Grid with management domain attributes</h3>

<p>The same grid only with management domain attributes attached to the grid header.</p>
<p>Note that SAM Parser sorts block attributes alphabetically for output, which makes it possible to test them with a simple string comparison (such as that performed by test.xslt). However, this is behavior of this parser, not a SAM language requirement.</p>

<h4>Source</h4>
<pre>
+++(*foom)(#bar)(?baz)
    *Type*  | *Term*    | *Notes*

    feature | fragment  | bing

    feature | fragments | bang
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td><span style="color: green"><b>Type</b></span></td>
<td><span style="color: green"><b>Term</b></span></td>
<td><span style="color: green"><b>Notes</b></span></td>
</tr>
<tr>
<td>feature</td>
<td>fragment</td>
<td>bing</td>
</tr>
<tr>
<td>feature</td>
<td>fragments</td>
<td>bang</td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid conditions="baz" id="foom" name="bar"&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid conditions="baz" id="foom" name="bar"&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384608436">Case: Grid with bold row</h3>

<p>Make an lower row bold.</p>

<h4>Source</h4>
<pre>
+++
    *Type*    | *Term*      | *Notes*
    feature   | fragment    | bing
    *feature* | *fragments* | *bang*
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td><span style="color: green"><b>Type</b></span></td>
<td><span style="color: green"><b>Term</b></span></td>
<td><span style="color: green"><b>Notes</b></span></td>
</tr>
<tr>
<td>feature</td>
<td>fragment</td>
<td>bing</td>
</tr>
<tr>
<td><span style="color: green"><b>feature</b></span></td>
<td><span style="color: green"><b>fragments</b></span></td>
<td><span style="color: green"><b>bang</b></span></td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;fragments&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;bang&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Term&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Notes&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;feature&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;fragments&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;bang&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384616116">Case: Grid with side heads</h3>

<p>Grid with row headings rather than column headings.</p>

<h4>Source</h4>
<pre>
+++
    *Type*    | Term      | Notes
    *feature* | fragment  | bing
    *feature* | fragments | bang
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td><span style="color: green"><b>Type</b></span></td>
<td>Term</td>
<td>Notes</td>
</tr>
<tr>
<td><span style="color: green"><b>feature</b></span></td>
<td>fragment</td>
<td>bing</td>
</tr>
<tr>
<td><span style="color: green"><b>feature</b></span></td>
<td>fragments</td>
<td>bang</td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;Term&lt;/cell&gt; &lt;cell&gt;Notes&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;Type&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;Term&lt;/cell&gt; &lt;cell&gt;Notes&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;fragment&lt;/cell&gt; &lt;cell&gt;bing&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;&lt;phrase&gt;&lt;annotation type="bold"&gt;feature&lt;/annotation&gt;&lt;/phrase&gt;&lt;/cell&gt; &lt;cell&gt;fragments&lt;/cell&gt; &lt;cell&gt;bang&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384632756">Test: Blockquotes</h2>

<p>Blockquotes are introduced by three quotations marke (single or double). The content of a blockquote is normal SAM markup.</p>


<h3 id="idp384632884">Case: Blockquote</h3>

<p>A blockquote with management domain metadata.</p>

<h4>Source</h4>
<pre>
After this paragraph, there is a blockquote:

"""(*foo)(#bar)(?baz)
    The quick brown fox jumps over the lazy dog.

    And the {cow}(beast "bovine")[Mother Goose] jumps over the moon.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>After this paragraph, there is a blockquote:</p>
<blockquote conditions="baz" id="foo" name="bar">
<p>The quick brown fox jumps over the lazy dog.</p>
<p>And the <span style="color: green"><span style="color: red">cow<span style="color: brown">[Mother Goose]</span></span></span> jumps over the moon.</p>
</blockquote>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;After this paragraph, there is a blockquote:&lt;/p&gt; &lt;blockquote conditions="baz" id="foo" name="bar"&gt; &lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;p&gt;And the &lt;phrase&gt;&lt;annotation type="beast" specifically="bovine"&gt;&lt;citation type="citation" value="Mother Goose"&gt;cow&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; jumps over the moon.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;After this paragraph, there is a blockquote:&lt;/p&gt; &lt;blockquote conditions="baz" id="foo" name="bar"&gt; &lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;p&gt;And the &lt;phrase&gt;&lt;annotation type="beast" specifically="bovine"&gt;&lt;citation type="citation" value="Mother Goose"&gt;cow&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; jumps over the moon.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384642356">Case: Alternate block quote</h3>

<p>Blockquote with single quotes.</p>

<h4>Source</h4>
<pre>
This is another paragraph. Then there is an alternate blockquote:

'''( #foo5)(?bar)(?baz)[Mother Goose]
    The quick brown fox jumps over the lazy dog.

'''
    This is a blockquote without a citation.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This is another paragraph. Then there is an alternate blockquote:</p>
<blockquote conditions="bar,baz" name="foo5">
<span style="color: brown">[Mother Goose]</span><p>The quick brown fox jumps over the lazy dog.</p>
</blockquote>
<blockquote>
<p>This is a blockquote without a citation.</p>
</blockquote>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This is another paragraph. Then there is an alternate blockquote:&lt;/p&gt; &lt;blockquote conditions="bar,baz" name="foo5"&gt; &lt;citation type="citation" value="Mother Goose"/&gt;&lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;This is a blockquote without a citation.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This is another paragraph. Then there is an alternate blockquote:&lt;/p&gt; &lt;blockquote conditions="bar,baz" name="foo5"&gt; &lt;citation type="citation" value="Mother Goose"/&gt;&lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;/blockquote&gt; &lt;blockquote&gt; &lt;p&gt;This is a blockquote without a citation.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384640820">Test: Codeblocks</h2>

<p>A codeblock is a block of program code. A codeblock is treated as plain text and is not parsed as SAM markup. It will be copied to output exactly as it occurs in the source. Codeblocks are denoted by three backtick at the start of a line. Codeblocks have a special annotation. The first word of an annotation on a codeblock is the language of the code.</p>


<h3 id="idp384645044">Case: Simple codeblock</h3>

<p>A simple codeblock.</p>

<h4>Source</h4>
<pre>
```(python)(?foo)
    def escape_for_xml(s):
        t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
        try:
            return s.translate(t)
        except AttributeError:
            return s
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
def escape_for_xml(s):
    t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
    try:
        return s.translate(t)
    except AttributeError:
        return s
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock conditions="foo" language="python"&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock conditions="foo" language="python"&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384649524">Case: Blank lines in codeblock</h3>

<p>Blank lines in a code block. The display of the result will be confusing here because the result is whitespace normalized for ease of comparison with the generated XML.</p>

<h4>Source</h4>
<pre>
```(sam)
    warnings:
        warning:(#warn_danger_domestic)
            title: Danger

            Be very very careful. This could kill you.

        warning:(#warn_danger_foreign)
            title: Look out!

            Pay close attention. You could really hurt yourself.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
warnings:
    warning:(#warn_danger_domestic)
        title: Danger

        Be very very careful. This could kill you.

    warning:(#warn_danger_foreign)
        title: Look out!

        Pay close attention. You could really hurt yourself.
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock language="sam"&gt; warnings: warning:(#warn_danger_domestic) title: Danger Be very very careful. This could kill you. warning:(#warn_danger_foreign) title: Look out! Pay close attention. You could really hurt yourself. &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock language="sam"&gt; warnings: warning:(#warn_danger_domestic) title: Danger Be very very careful. This could kill you. warning:(#warn_danger_foreign) title: Look out! Pay close attention. You could really hurt yourself. &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384656564">Case: Invalid blockstart in codeblock</h3>

<p>This is an construct that raise an error in an actual document. Curious because lots of valid block starts in other codeblocks did not cause a problem. But this one raised an invalid block name error. Turns out this was caused by tabs instead of spaces used to indent the line, which promoted it to a higher level of the document hierarchy and thus outside the codeblock. But the test is worth keeping to make sure that the contents of codeblocks are not being interpreted as SAM markup.</p>

<h4>Source</h4>
<pre>
```
    first-ordered-list-item =
        {fontx: 12pt "Century Schoolbook"}&lt;count=1&gt;.[tab]
    ordered-list-item =
        {fonty: 12pt "Century Schoolbook"}&lt;++count&gt;.[tab]
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
first-ordered-list-item =
    {fontx: 12pt "Century Schoolbook"}&lt;count=1&gt;.[tab]
ordered-list-item =
    {fonty: 12pt "Century Schoolbook"}&lt;++count&gt;.[tab]
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock&gt; first-ordered-list-item = {fontx: 12pt "Century Schoolbook"}&amp;lt;count=1&amp;gt;.[tab] ordered-list-item = {fonty: 12pt "Century Schoolbook"}&amp;lt;++count&amp;gt;.[tab] &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock&gt; first-ordered-list-item = {fontx: 12pt "Century Schoolbook"}&amp;lt;count=1&amp;gt;.[tab] ordered-list-item = {fonty: 12pt "Century Schoolbook"}&amp;lt;++count&amp;gt;.[tab] &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384653364">Test: Lines</h2>

<p>Lines allows you to create text with specific line breaks. Lines are created by beginning each line on a new line and starting with a <span style="color: green"><tt>|</tt></span> character. There must be one space after the <span style="color: green"><tt>|</tt></span>, which is discarded. All other spaces after <span style="color: green"><tt>|</tt></span> are retained. (Retained spaces are not tested for in text.xslt because the test normalize space.)</p>


<h3 id="idp384667060">Case: Lines</h3>

<p>Lines with various annotations:</p>

<h4>Source</h4>
<pre>
|(#foo2) You gotta walk that lonesome valley,[*bing page 22]
| You gotta walk it by yourself,
|(?bar) Nobody here can walk it for you,
|    You gotta walk it by yourself.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
You gotta walk that lonesome valley,<span style="color: brown">[bing]</span><br>
You gotta walk it by yourself,<br>
Nobody here can walk it for you,<br>
   You gotta walk it by yourself.<br>

<h4>Intended output (space normalized)</h4>
<pre>&lt;line name="foo2"&gt;You gotta walk that lonesome valley,&lt;citation type="idref" value="bing" extra="page 22"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line conditions="bar"&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;line name="foo2"&gt;You gotta walk that lonesome valley,&lt;citation type="idref" value="bing" extra="page 22"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line conditions="bar"&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384663220">Case: Lines inside a blockquote</h3>

<p>Lines should work inside a block quote.</p>

<h4>Source</h4>
<pre>
"""[*bing page 22]
    |(#foo2) You gotta walk that lonesome valley,[*bing page 22]
    | You gotta walk it by yourself,
    |(?bar) Nobody here can walk it for you,
    |    You gotta walk it by yourself.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<blockquote>
<span style="color: brown">[bing]</span>You gotta walk that lonesome valley,<span style="color: brown">[bing]</span><br>
You gotta walk it by yourself,<br>
Nobody here can walk it for you,<br>
   You gotta walk it by yourself.<br>
</blockquote>

<h4>Intended output (space normalized)</h4>
<pre>&lt;blockquote&gt; &lt;citation type="idref" value="bing" extra=" page 22"/&gt;&lt;line name="foo2"&gt;You gotta walk that lonesome valley,&lt;citation type="idref" value="bing" extra="page 22"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line conditions="bar"&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt; &lt;/blockquote&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;blockquote&gt; &lt;citation type="idref" value="bing" extra=" page 22"/&gt;&lt;line name="foo2"&gt;You gotta walk that lonesome valley,&lt;citation type="idref" value="bing" extra="page 22"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line conditions="bar"&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt; &lt;/blockquote&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384674356">Test: Attributes</h2>

<p>SAM supports four explicit attributes: ids, names, conditions, and language. There is no general attribute mechanism such as that in XML. You can generally encode the same data in SAM using fields or annotations.</p>
<p>Attributes can be applied to blocks, phrases, and inserts. You cannot apply attributes to a paragraph, but you can wrap a paragraph in a fragment and apply attributes to the fragment.</p>
<p>Attributes are applied using annotation markup, but with a specific initial character to denote each kind of attribute:</p>
<ul>
<li>
<p><span style="color: green"><tt>(*id)</tt></span> creates an ID attribute.</p>
</li>
<li>
<p><span style="color: green"><tt>(#name)</tt></span> creates a name attribute.</p>
</li>
<li>
<p><span style="color: green"><tt>(?condition)</tt></span> creates a condition attribute.</p>
</li>
<li>
<p><span style="color: green"><tt>(!en-CA)</tt></span> creates a language attribute.</p>
</li>
</ul>
<p>You can only apply one id, name, or language attribute to a block or phrase. You can apply more than one condition attribute. On output to XML, the condition attributes will be converted to a single <span style="color: green"><tt>conditions</tt></span> attribute with the individual conditions separated by commas. (For which reason, condition statements cant include commas.)</p>


<h3 id="idp384678324">Case: Attributes on block</h3>
Attributes on a block
<h4>Source</h4>
<pre>
block:(!en-CA)(*id2)(#name)(?a)(?b) Title

    Content of the block.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<block conditions="a,b" id="id2" name="name" xml:lang="en-CA">
<title>Title</title>
<p>Content of the block.</p>
</block>

<h4>Intended output (space normalized)</h4>
<pre>&lt;block conditions="a,b" id="id2" name="name" xml:lang="en-CA"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;p&gt;Content of the block.&lt;/p&gt; &lt;/block&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;block conditions="a,b" id="id2" name="name" xml:lang="en-CA"&gt; &lt;title&gt;Title&lt;/title&gt; &lt;p&gt;Content of the block.&lt;/p&gt; &lt;/block&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384690356">Case: Attributes on field</h3>
Attributes on a field
<h4>Source</h4>
<pre>
field:(!en-CA)(*id3)(#name)(?a)(?b) Value of the field.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<field conditions="a,b" id="id3" name="name" xml:lang="en-CA">Value of the field.</field>

<h4>Intended output (space normalized)</h4>
<pre>&lt;field conditions="a,b" id="id3" name="name" xml:lang="en-CA"&gt;Value of the field.&lt;/field&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;field conditions="a,b" id="id3" name="name" xml:lang="en-CA"&gt;Value of the field.&lt;/field&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384687924">Case: Attributes on fragment</h3>
Attributes on a fragment
<h4>Source</h4>
<pre>
~~~(!en-CA)(*id4)(#name)(?a)(?b)

    Content of the fragment.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<fragment conditions="a,b" id="id4" name="name" xml:lang="en-CA">
<p>Content of the fragment.</p>
</fragment>

<h4>Intended output (space normalized)</h4>
<pre>&lt;fragment conditions="a,b" id="id4" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Content of the fragment.&lt;/p&gt; &lt;/fragment&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;fragment conditions="a,b" id="id4" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Content of the fragment.&lt;/p&gt; &lt;/fragment&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384700980">Case: attributes on grid</h3>
Attributes on a grid
<h4>Source</h4>
<pre>
+++(!en-CA)(*id5)(#name)(?a)(?b)

    Content | of
    the     | grid.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<table border="1">
<tr>
<td>Content</td>
<td>of</td>
</tr>
<tr>
<td>the</td>
<td>grid.</td>
</tr>
</table>

<h4>Intended output (space normalized)</h4>
<pre>&lt;grid conditions="a,b" id="id5" name="name" xml:lang="en-CA"&gt; &lt;row&gt; &lt;cell&gt;Content&lt;/cell&gt; &lt;cell&gt;of&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;the&lt;/cell&gt; &lt;cell&gt;grid.&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;grid conditions="a,b" id="id5" name="name" xml:lang="en-CA"&gt; &lt;row&gt; &lt;cell&gt;Content&lt;/cell&gt; &lt;cell&gt;of&lt;/cell&gt; &lt;/row&gt; &lt;row&gt; &lt;cell&gt;the&lt;/cell&gt; &lt;cell&gt;grid.&lt;/cell&gt; &lt;/row&gt; &lt;/grid&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384703412">Case: attributes on record set</h3>
Attributes on a record set
<h4>Source</h4>
<pre>
recordset::(!en-CA)(*id6)(#name)(?a)(?b) foo, bar

    a, b
    c, d
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<recordset conditions="a,b" id="id6" name="name" xml:lang="en-CA">
<row>
<foo>a</foo>
<bar>b</bar>
</row>
<row>
<foo>c</foo>
<bar>d</bar>
</row>
</recordset>

<h4>Intended output (space normalized)</h4>
<pre>&lt;recordset conditions="a,b" id="id6" name="name" xml:lang="en-CA"&gt; &lt;row&gt; &lt;foo&gt;a&lt;/foo&gt; &lt;bar&gt;b&lt;/bar&gt; &lt;/row&gt; &lt;row&gt; &lt;foo&gt;c&lt;/foo&gt; &lt;bar&gt;d&lt;/bar&gt; &lt;/row&gt; &lt;/recordset&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;recordset conditions="a,b" id="id6" name="name" xml:lang="en-CA"&gt; &lt;row&gt; &lt;foo&gt;a&lt;/foo&gt; &lt;bar&gt;b&lt;/bar&gt; &lt;/row&gt; &lt;row&gt; &lt;foo&gt;c&lt;/foo&gt; &lt;bar&gt;d&lt;/bar&gt; &lt;/row&gt; &lt;/recordset&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384704564">Case: Attributes on unordered list</h3>

<p>Attributes on an unordered list item.</p>

<h4>Source</h4>
<pre>
* Fred

*(!en-CA)(*id7)(#name)(?a)(?b) Barney and
  Betty and
  Bam Bam.

* Wilma
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>Fred</p>
</li>
<li conditions="a,b" id="id7" name="name" xml:lang="en-CA">
<p>Barney and Betty and Bam Bam.</p>
</li>
<li>
<p>Wilma</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="a,b" id="id7" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="a,b" id="id7" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384450356">Case: Attributes on ordered list</h3>

<p>Attributes on an ordered list item.</p>

<h4>Source</h4>
<pre>
1. Fred
2.(!en-CA)(*id8)(#name)(?a)(?b) Barney and
 Betty and
 Bam Bam.
3. Wilma
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>Fred</p>
</li>
<li conditions="a,b" id="id8" name="name" xml:lang="en-CA">
<p>Barney and Betty and Bam Bam.</p>
</li>
<li>
<p>Wilma</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="a,b" id="id8" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="a,b" id="id8" name="name" xml:lang="en-CA"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384458932">Case: Attributes on lines</h3>

<p>Lines with annotations:</p>

<h4>Source</h4>
<pre>
|(!en-CA)(*id9)(#name)(?a)(?b) You gotta walk that lonesome valley,[*bing page 22]
| You gotta walk it by yourself,
| Nobody here can walk it for you,
|    You gotta walk it by yourself.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
You gotta walk that lonesome valley,<span style="color: brown">[bing]</span><br>
You gotta walk it by yourself,<br>
Nobody here can walk it for you,<br>
   You gotta walk it by yourself.<br>

<h4>Intended output (space normalized)</h4>
<pre>&lt;line conditions="a,b" id="id9" name="name" xml:lang="en-CA"&gt;You gotta walk that lonesome valley,&lt;citation type="idref" value="bing" extra="page 22"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;line conditions="a,b" id="id9" name="name" xml:lang="en-CA"&gt;You gotta walk that lonesome valley,&lt;citation type="idref" value="bing" extra="page 22"/&gt;&lt;/line&gt; &lt;line&gt;You gotta walk it by yourself,&lt;/line&gt; &lt;line&gt;Nobody here can walk it for you,&lt;/line&gt; &lt;line&gt; You gotta walk it by yourself.&lt;/line&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384469172">Case: Attributes on blockquote</h3>

<p>A blockquote with attributes and a citation.</p>

<h4>Source</h4>
<pre>
After this paragraph, there is a blockquote:

"""(!en-CA)(*id10)(#name)(?a)(?b)[*cit]
    The quick brown fox jumps over the lazy dog.

    And the {cow}(beast "bovine")[Mother Goose] jumps over the moon.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>After this paragraph, there is a blockquote:</p>
<blockquote conditions="a,b" id="id10" name="name" xml:lang="en-CA">
<span style="color: brown">[cit]</span><p>The quick brown fox jumps over the lazy dog.</p>
<p>And the <span style="color: green"><span style="color: red">cow<span style="color: brown">[Mother Goose]</span></span></span> jumps over the moon.</p>
</blockquote>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;After this paragraph, there is a blockquote:&lt;/p&gt; &lt;blockquote conditions="a,b" id="id10" name="name" xml:lang="en-CA"&gt; &lt;citation type="idref" value="cit"/&gt;&lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;p&gt;And the &lt;phrase&gt;&lt;annotation type="beast" specifically="bovine"&gt;&lt;citation type="citation" value="Mother Goose"&gt;cow&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; jumps over the moon.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;After this paragraph, there is a blockquote:&lt;/p&gt; &lt;blockquote conditions="a,b" id="id10" name="name" xml:lang="en-CA"&gt; &lt;citation type="idref" value="cit"/&gt;&lt;p&gt;The quick brown fox jumps over the lazy dog.&lt;/p&gt; &lt;p&gt;And the &lt;phrase&gt;&lt;annotation type="beast" specifically="bovine"&gt;&lt;citation type="citation" value="Mother Goose"&gt;cow&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; jumps over the moon.&lt;/p&gt; &lt;/blockquote&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384479156">Case: Attributes on a phrase</h3>

<p>Attributes on a phrase.</p>

<h4>Source</h4>
<pre>
{The Duke}(actor "John Wayne")(!en-CA)(*id11)(#name)(?a)(?b)[*cit] plays Rooster Cogburn.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><span style="color: green"><span style="color: red">The Duke<span style="color: brown">[cit]</span></span></span> plays Rooster Cogburn.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase id="id11" conditions="a,b" name="name" xml:lang="en-CA"&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;citation type="idref" value="cit"&gt;The Duke&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase id="id11" conditions="a,b" name="name" xml:lang="en-CA"&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;citation type="idref" value="cit"&gt;The Duke&lt;/citation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384479540">Case: Attributes on a codeblock</h3>

<p>Attributes on a codeblock.</p>

<h4>Source</h4>
<pre>
```(python)(*id12)(#name)(?a)(?b)
    def escape_for_xml(s):
        t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
        try:
            return s.translate(t)
        except AttributeError:
            return s
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<pre>
def escape_for_xml(s):
    t = dict(zip([ord('&lt;'), ord('&gt;'), ord('&amp;')], ['&amp;lt;', '&amp;gt;', '&amp;amp;']))
    try:
        return s.translate(t)
    except AttributeError:
        return s
</pre>

<h4>Intended output (space normalized)</h4>
<pre>&lt;codeblock conditions="a,b" id="id12" language="python" name="name"&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;codeblock conditions="a,b" id="id12" language="python" name="name"&gt; def escape_for_xml(s): t = dict(zip([ord('&amp;lt;'), ord('&amp;gt;'), ord('&amp;amp;')], ['&amp;amp;lt;', '&amp;amp;gt;', '&amp;amp;amp;'])) try: return s.translate(t) except AttributeError: return s &lt;/codeblock&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384487476">Case: Attributes on an embed</h3>

<p>Attributes on a embed.</p>

<h4>Source</h4>
<pre>
===(latexmathml)(*id13)(#name)(?a)(?b)
    n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<embed conditions="a,b" id="id13" language="latexmathml" name="name">
n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k
</embed>

<h4>Intended output (space normalized)</h4>
<pre>&lt;embed conditions="a,b" id="id13" language="latexmathml" name="name"&gt; n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k &lt;/embed&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;embed conditions="a,b" id="id13" language="latexmathml" name="name"&gt; n_{\mathrm{offset}} = \sum_{k=0}^{N-1} s_k n_k &lt;/embed&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384494132">Case: Attributes on inserts</h3>

<p>Attributes on inserts.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;(image foo.gif)(*id14)(#name)(?a)(?b)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert conditions="a,b" id="id14" item="foo.gif" name="name" type="image"></insert>

<h4>Intended output (space normalized)</h4>
<pre>&lt;insert conditions="a,b" id="id14" item="foo.gif" name="name" type="image"/&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert conditions="a,b" id="id14" item="foo.gif" name="name" type="image"/&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384494004">Test: Annotations</h2>

<p>A phrase can have one or more annotations or citations attached to it. On output, the text of the phrase is wrapped in the annotations and citations in the order they were specified in source.</p>


<h3 id="idp384495412">Case: Multiple annotations</h3>

<p>Phrases with more than one attribute in a chain.</p>

<h4>Source</h4>
<pre>
This is {very}(bold) important.

This is {very}(bold)(italic) important.

This is {very}(bold)(italic)(green) important.

This `foo`(bar) baz.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This is <span style="color: green"><b>very</b></span> important.</p>
<p>This is <span style="color: green"><b><i>very</i></b></span> important.</p>
<p>This is <span style="color: green"><b><i><span style="color: red">very</span></i></b></span> important.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;very&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt; &lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;annotation type="italic"&gt;very&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt; &lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;annotation type="italic"&gt;&lt;annotation type="green"&gt;very&lt;/annotation&gt;&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;very&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt; &lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;annotation type="italic"&gt;very&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt; &lt;p&gt;This is &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;annotation type="italic"&gt;&lt;annotation type="green"&gt;very&lt;/annotation&gt;&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; important.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384499508">Case: Consecutive Annotations</h3>

<p>Two separate annotations with no space between them.</p>

<h4>Source</h4>
<pre>
{The Duke}(actor "John Wayne")(if "1969"){Jeff Bridges}(actor)(if "2010") plays Rooster Cogburn.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><span style="color: green"><span style="color: red">
        [The Duke]?
    </span></span><span style="color: green"><span style="color: red">
        [Jeff Bridges]?
    </span></span> plays Rooster Cogburn.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;annotation type="if" specifically="1969"&gt;The Duke&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt;&lt;phrase&gt;&lt;annotation type="actor"&gt;&lt;annotation type="if" specifically="2010"&gt;Jeff Bridges&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="actor" specifically="John Wayne"&gt;&lt;annotation type="if" specifically="1969"&gt;The Duke&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt;&lt;phrase&gt;&lt;annotation type="actor"&gt;&lt;annotation type="if" specifically="2010"&gt;Jeff Bridges&lt;/annotation&gt;&lt;/annotation&gt;&lt;/phrase&gt; plays Rooster Cogburn.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384862868">Case: Annotation followed by citation</h3>

<p>Observed in the wild: When an annotated phrase was followed by a phrase with a citation, the end of the annotation was not found and the two structures were recognized as one long citation.</p>

<h4>Source</h4>
<pre>
When using the map approach, it is important to
think about how your content will {single
source}(concept "single sourcing") to paper-like
media and hypertext-media. Some people will output
the same map to to both media. In hyper-text media
that usually results in the map being turned into
a table of contents, often displayed in a separate
pane as in a help system. This may be fine if you
are creating a help system, but it is not how Web
content is usually displayed. Another approach to
single sourcing content that uses the assemble from
pieces approach is to create completely separate maps
-- or even to use completely different assembly
techniques that don't involve maps at all -- to produce
paper-like and hypertext outputs. This can help you
to work around some of the design limitations that
we talked about in the {single sourcing
chapter}[#single_source].
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>When using the map approach, it is important to think about how your content will <span style="color: green"><span style="color: red">single source</span></span> to paper-like media and hypertext-media. Some people will output the same map to to both media. In hyper-text media that usually results in the map being turned into a table of contents, often displayed in a separate pane as in a help system. This may be fine if you are creating a help system, but it is not how Web content is usually displayed. Another approach to single sourcing content that uses the assemble from pieces approach is to create completely separate maps  or even to use completely different assembly techniques that dont involve maps at all  to produce paper-like and hypertext outputs. This can help you to work around some of the design limitations that we talked about in the <span style="color: green">single sourcing chapter<span style="color: brown">[single_source]</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;When using the map approach, it is important to think about how your content will &lt;phrase&gt;&lt;annotation type="concept" specifically="single sourcing"&gt;single source&lt;/annotation&gt;&lt;/phrase&gt; to paper-like media and hypertext-media. Some people will output the same map to to both media. In hyper-text media that usually results in the map being turned into a table of contents, often displayed in a separate pane as in a help system. This may be fine if you are creating a help system, but it is not how Web content is usually displayed. Another approach to single sourcing content that uses the assemble from pieces approach is to create completely separate maps  or even to use completely different assembly techniques that dont involve maps at all  to produce paper-like and hypertext outputs. This can help you to work around some of the design limitations that we talked about in the &lt;phrase&gt;&lt;citation type="nameref" value="single_source"&gt;single sourcing chapter&lt;/citation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;When using the map approach, it is important to think about how your content will &lt;phrase&gt;&lt;annotation type="concept" specifically="single sourcing"&gt;single source&lt;/annotation&gt;&lt;/phrase&gt; to paper-like media and hypertext-media. Some people will output the same map to to both media. In hyper-text media that usually results in the map being turned into a table of contents, often displayed in a separate pane as in a help system. This may be fine if you are creating a help system, but it is not how Web content is usually displayed. Another approach to single sourcing content that uses the assemble from pieces approach is to create completely separate maps  or even to use completely different assembly techniques that dont involve maps at all  to produce paper-like and hypertext outputs. This can help you to work around some of the design limitations that we talked about in the &lt;phrase&gt;&lt;citation type="nameref" value="single_source"&gt;single sourcing chapter&lt;/citation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384873492">Case: Annotation with language metadata</h3>

<p>You can add language metadata to a phrase.</p>

<h4>Source</h4>
<pre>
Press {Enter}(key)(!fr-CA)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Press <span style="color: green"><span style="color: red">Enter</span></span></p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Press &lt;phrase xml:lang="fr-CA"&gt;&lt;annotation type="key"&gt;Enter&lt;/annotation&gt;&lt;/phrase&gt;&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Press &lt;phrase xml:lang="fr-CA"&gt;&lt;annotation type="key"&gt;Enter&lt;/annotation&gt;&lt;/phrase&gt;&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384874132">Case: Annotation with a condition</h3>

<p>You can add condition metadata to a phrase.</p>

<h4>Source</h4>
<pre>
Press {Enter}(key)(?foo)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Press <span style="color: green"><span style="color: red">Enter</span></span></p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Press &lt;phrase conditions="foo"&gt;&lt;annotation type="key"&gt;Enter&lt;/annotation&gt;&lt;/phrase&gt;&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Press &lt;phrase conditions="foo"&gt;&lt;annotation type="key"&gt;Enter&lt;/annotation&gt;&lt;/phrase&gt;&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384875028">Case: Prior annotation lookup</h3>

<p>If a phrase has no annotation or citation attached to it, the parser will attempt to find a suitable annotation by searching back up the document for the most recent case of the same phrase. If it finds one, it will copy the annotations and citations from that phrase to the current one. This prevents writers from having to write the same annotation out over and over again. If not prior phrase is found, a warning is issued.</p>

<h4>Source</h4>
<pre>
This {annotation}(https://en.wikipedia.org/wiki/Annotation) is repeated {annotation}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This <span style="color: green"><a href="https://en.wikipedia.org/wiki/Annotation">annotation</a></span> is repeated <span style="color: green"><a href="https://en.wikipedia.org/wiki/Annotation">annotation</a></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt; is repeated &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt; is repeated &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384883860">Case: Prior annotation lookup in included file</h3>

<p>Look up annotations in included files.</p>

<h4>Source</h4>
<pre>
Annotation lookup test: {test phrase}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Annotation lookup test: <span style="color: green"><span style="color: red">test phrase</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Annotation lookup test: &lt;phrase&gt;&lt;annotation type="test"&gt;test phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Annotation lookup test: &lt;phrase&gt;&lt;annotation type="test"&gt;test phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384882836">Case: Earlier para</h3>

<p>The marching annotation is in an earlier paragraph in the document. (In this case, in the preceding test case).</p>

<h4>Source</h4>
<pre>
This {annotation} occurs previously.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This <span style="color: green"><a href="https://en.wikipedia.org/wiki/Annotation">annotation</a></span> occurs previously.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt; occurs previously.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/Annotation"&gt;annotation&lt;/annotation&gt;&lt;/phrase&gt; occurs previously.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384895892">Case: Failure</h3>

<p>There is no previous phrase. This should generate a warning when the test is run.</p>

<h4>Source</h4>
<pre>
This {should be reported}.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This <span style="color: green">should be reported</span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;should be reported&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This &lt;phrase&gt;should be reported&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384897172">Test: Links</h2>

<p>Links are created with an annotation.</p>
<p>You can specify a link as a <span style="color: green"><tt>link</tt></span> annotation.</p>
<pre>
foo {bar}(link "http://example.com/bar") baz
</pre>
<p>The link annotation shortcut lets you shorten this to:</p>
<pre>
foo {bar}(http://example.com/bar) baz
</pre>
<p>However, use of the shortcut means you need to escape any parens that occur in the URL.</p>


<h3 id="idp384902676">Case: Parens not escaped</h3>

<p>The parens are not escaped, causing misreading of markup. This example should be interpreted incorrectly.</p>

<h4>Source</h4>
<pre>
Rio Bravo refers to the movie
(and not to {the city in Texas or
the nature reserve in
Belize}(https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)))
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Rio Bravo refers to the movie (and not to <span style="color: green"><a href="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_">the city in Texas or the nature reserve in Belize</a></span>)</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_" namespace="disambiguation"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_" namespace="disambiguation"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384903828">Case: Parens escaped with backslashes</h3>

<p>The parens in the URL are escaped with blackslashes. This example should be interpreted correctly.</p>

<h4>Source</h4>
<pre>
Rio Bravo refers to the movie
(and not to {the city in Texas or
the nature reserve in
Belize}(https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_\(disambiguation\)))
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Rio Bravo refers to the movie (and not to <span style="color: green"><a href="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)">the city in Texas or the nature reserve in Belize</a></span>)</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384908308">Case: Using explicit link annotation instead of shortcut</h3>

<p>The link is specified using a specific link annotation so the URL is not in parens itself. This example should be interpreted correctly.</p>

<h4>Source</h4>
<pre>
Rio Bravo refers to the movie
(and not to {the city in Texas or
the nature reserve in
Belize}(link "https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"))
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Rio Bravo refers to the movie (and not to <span style="color: green"><a href="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)">the city in Texas or the nature reserve in Belize</a></span>)</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Rio Bravo refers to the movie (and not to &lt;phrase&gt;&lt;annotation type="link" specifically="https://en.wikipedia.org/wiki/R%C3%ADo_Bravo_(disambiguation)"&gt;the city in Texas or the nature reserve in Belize&lt;/annotation&gt;&lt;/phrase&gt;)&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384920084">Test: Citations</h2>

<p>A citation is a reference to a source of information. You can cite with a phrase or by reference to an ID or a name.</p>


<h3 id="idp384922132">Case: Citation on phrase</h3>

<p>A citation on a phrase</p>

<h4>Source</h4>
<pre>
You can {call me Ishmael}[Melville, 1851].
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>You can <span style="color: green">call me Ishmael<span style="color: brown">[Melville, 1851]</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;You can &lt;phrase&gt;&lt;citation type="citation" value="Melville, 1851"&gt;call me Ishmael&lt;/citation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;You can &lt;phrase&gt;&lt;citation type="citation" value="Melville, 1851"&gt;call me Ishmael&lt;/citation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384916884">Case: Literal square brackets</h3>

<p>If you want to enter literal square brackets, rather than create a citation, escape the opening square bracket with a backslash.</p>

<h4>Source</h4>
<pre>
Press \[Enter].
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Press [Enter].</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Press [Enter].&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Press [Enter].&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384927124">Case: Multiple citations is a paragraph</h3>

<p>Making sure that when there are multiple citations in a paragraph they are all detected separately.</p>

<h4>Source</h4>
<pre>
Among its default processing steps, the SPFE process includes the subject-based linking algorithms described in [#chapter.linking] and the subject-based composition and architecture algorithms described in [#chapter.composition] and [#chapter.architecture], including bottom-up information architecture.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Among its default processing steps, the SPFE process includes the subject-based linking algorithms described in <span style="color: brown">[chapter.linking]</span> and the subject-based composition and architecture algorithms described in <span style="color: brown">[chapter.composition]</span> and <span style="color: brown">[chapter.architecture]</span>, including bottom-up information architecture.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Among its default processing steps, the SPFE process includes the subject-based linking algorithms described in &lt;citation type="nameref" value="chapter.linking"/&gt; and the subject-based composition and architecture algorithms described in &lt;citation type="nameref" value="chapter.composition"/&gt; and &lt;citation type="nameref" value="chapter.architecture"/&gt;, including bottom-up information architecture.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Among its default processing steps, the SPFE process includes the subject-based linking algorithms described in &lt;citation type="nameref" value="chapter.linking"/&gt; and the subject-based composition and architecture algorithms described in &lt;citation type="nameref" value="chapter.composition"/&gt; and &lt;citation type="nameref" value="chapter.architecture"/&gt;, including bottom-up information architecture.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384936084">Test: Characters</h2>

<p>All SAM documents are UTF-8 unicode documents. Therefore you should be able to enter any character directly. However, typing extended characters is not easy, so SAM supports character entities for entering characters that are not easy to type.</p>


<h3 id="idp384933524">Case: HTML named entities</h3>

<p>All of the HTML named character entities are supported.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs &amp;pound;5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs 5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs 5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs 5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384933780">Case: Numeric entities</h3>

<p>XML-style decimal numeric character entities are supported.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs &amp;#163;5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs 5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs 5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs 5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384943508">Case: Hexadecimal entity</h3>

<p>XML-style hexadecimal numeric character entities are supported.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs &amp;#xA3;5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs 5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs 5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs 5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384945940">Case: Character entities inside phrases and decorations</h3>

<p>Make sure entities are recognized in phrases and decorations.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs *&amp;#xA3;*5.00.

The doggy in the window costs {&amp;#xA3;5.00}(money).
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs <span style="color: green"><b></b></span>5.00.</p>
<p>The doggy in the window costs <span style="color: green"><span style="color: red">5.00</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt; &lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="money"&gt;5.00&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="bold"&gt;&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt; &lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="money"&gt;5.00&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384952212">Case: In code annotation shortcut:</h3>

<p>In a code decoration, character entities are not expanded.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs `&amp;#xA3;`5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs <span style="color: green"><tt>&amp;#xA3;</tt></span>5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="code"&gt;&amp;amp;#xA3;&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="code"&gt;&amp;amp;#xA3;&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384959380">Case: In bold decoration escaped:</h3>

<p>Escaped version inside a bold decoration.</p>

<h4>Source</h4>
<pre>
The doggy in the window costs *\&amp;#xA3;*5.00.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The doggy in the window costs <span style="color: green"><b>&amp;#xA3;</b></span>5.00.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="bold"&gt;&amp;amp;#xA3;&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The doggy in the window costs &lt;phrase&gt;&lt;annotation type="bold"&gt;&amp;amp;#xA3;&lt;/annotation&gt;&lt;/phrase&gt;5.00.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384961940">Case: Ampersand in a sentence, escaped with \ and not escaped.</h3>

<p>Unlike XML, SAM does not require that an ampersand be escaped if it is not part of a character entity. You can escape it if you want to using a backslash. Both should output in XML as <span style="color: green"><tt>&amp;amp;</tt></span></p>

<h4>Source</h4>
<pre>
The cat &amp; the dog.

The cat \&amp; the dog.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>The cat &amp; the dog.</p>
<p>The cat &amp; the dog.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;The cat &amp;amp; the dog.&lt;/p&gt; &lt;p&gt;The cat &amp;amp; the dog.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;The cat &amp;amp; the dog.&lt;/p&gt; &lt;p&gt;The cat &amp;amp; the dog.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384969748">Test: Character escapes</h2>

<p>Character escaping</p>


<h3 id="idp384967956">Case: Escapes in explicit annotations</h3>

<p>Escaping curly braces and backslashes inside a phrase.</p>

<h4>Source</h4>
<pre>
There is a curly brace and two backslashes in {this \\\\\{ phrase}(bold).
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>There is a curly brace and two backslashes in <span style="color: green"><b>this \\{ phrase</b></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;There is a curly brace and two backslashes in &lt;phrase&gt;&lt;annotation type="bold"&gt;this \\{ phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;There is a curly brace and two backslashes in &lt;phrase&gt;&lt;annotation type="bold"&gt;this \\{ phrase&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384978068">Case: Escapes in code decorations</h3>

<p>Code decorations have different escaping rules. All characters are literal except that the backtick character can be escaped with a double back tick. Character entities are not translated in a code decoration. Smart quote transformations are not applied.</p>

<h4>Source</h4>
<pre>
There is a backtick and two backslashes in `th\\is `` code` decoration.

There is a backslash and a curly brace in `this \{ code` decoration.

`pubwork="book"` is an attribute on the element `citetitle`.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>There is a backtick and two backslashes in <span style="color: green"><tt>th\\is ` code</tt></span> decoration.</p>
<p>There is a backslash and a curly brace in <span style="color: green"><tt>this \{ code</tt></span> decoration.</p>
<p><span style="color: green"><tt>pubwork="book"</tt></span> is an attribute on the element <span style="color: green"><tt>citetitle</tt></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;There is a backtick and two backslashes in &lt;phrase&gt;&lt;annotation type="code"&gt;th\\is ` code&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt; &lt;p&gt;There is a backslash and a curly brace in &lt;phrase&gt;&lt;annotation type="code"&gt;this \{ code&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="code"&gt;pubwork="book"&lt;/annotation&gt;&lt;/phrase&gt; is an attribute on the element &lt;phrase&gt;&lt;annotation type="code"&gt;citetitle&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;There is a backtick and two backslashes in &lt;phrase&gt;&lt;annotation type="code"&gt;th\\is ` code&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt; &lt;p&gt;There is a backslash and a curly brace in &lt;phrase&gt;&lt;annotation type="code"&gt;this \{ code&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="code"&gt;pubwork="book"&lt;/annotation&gt;&lt;/phrase&gt; is an attribute on the element &lt;phrase&gt;&lt;annotation type="code"&gt;citetitle&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384978964">Case: Escapes in decorations</h3>

<p>Escape sequences are recognized inside decorations.</p>

<h4>Source</h4>
<pre>
There is a `*` in *this \* bold* decoration.

There is a `_` in _this \_ italic_ decoration.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>There is a <span style="color: green"><tt>*</tt></span> in <span style="color: green"><b>this * bold</b></span> decoration.</p>
<p>There is a <span style="color: green"><tt>_</tt></span> in <span style="color: green"><i>this _ italic</i></span> decoration.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;There is a &lt;phrase&gt;&lt;annotation type="code"&gt;*&lt;/annotation&gt;&lt;/phrase&gt; in &lt;phrase&gt;&lt;annotation type="bold"&gt;this * bold&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt; &lt;p&gt;There is a &lt;phrase&gt;&lt;annotation type="code"&gt;_&lt;/annotation&gt;&lt;/phrase&gt; in &lt;phrase&gt;&lt;annotation type="italic"&gt;this _ italic&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;There is a &lt;phrase&gt;&lt;annotation type="code"&gt;*&lt;/annotation&gt;&lt;/phrase&gt; in &lt;phrase&gt;&lt;annotation type="bold"&gt;this * bold&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt; &lt;p&gt;There is a &lt;phrase&gt;&lt;annotation type="code"&gt;_&lt;/annotation&gt;&lt;/phrase&gt; in &lt;phrase&gt;&lt;annotation type="italic"&gt;this _ italic&lt;/annotation&gt;&lt;/phrase&gt; decoration.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384986644">Case: XML reserved characters in citation specifically attribute</h3>

<p>XML reserved characters occurring within the text of a specifically attribute.</p>

<h4>Source</h4>
<pre>
{Skimbleshanks}(animal '"Old  &lt;&gt;&amp; Possum"' (Eliott)).
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><span style="color: green"><span style="color: red">Skimbleshanks</span></span>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="animal" specifically="&amp;quot;Old &amp;lt;&amp;gt;&amp;amp; Possum&amp;quot;" namespace="Eliott"&gt;Skimbleshanks&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;phrase&gt;&lt;annotation type="animal" specifically="&amp;quot;Old &amp;lt;&amp;gt;&amp;amp; Possum&amp;quot;" namespace="Eliott"&gt;Skimbleshanks&lt;/annotation&gt;&lt;/phrase&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384996244">Test: Conditions</h2>

<p>You can add conditions to block metadata using condition tokens. Condition tokens start with <span style="color: green"><tt>?</tt></span> and must not contain spaces. The application of conditions to text is up to the application layer. SAM just provided a mechanism for recording conditions.</p>


<h3 id="idp384994452">Case: Conditions on unordered list shortcut</h3>

<p>A condition on an unordered list item.</p>

<h4>Source</h4>
<pre>
* Fred

*(?foo) Barney and
  Betty and
  Bam Bam.

* Wilma
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ul>
<li>
<p>Fred</p>
</li>
<li conditions="foo">
<p>Barney and Betty and Bam Bam.</p>
</li>
<li>
<p>Wilma</p>
</li>
</ul>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="foo"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ul&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="foo"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ul&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384997780">Case: Conditions on ordered list shortcut</h3>

<p>Condition on an ordered list item.</p>

<h4>Source</h4>
<pre>
1. Fred
2.(?foo) Barney and
 Betty and
 Bam Bam.
3. Wilma
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<ol>
<li>
<p>Fred</p>
</li>
<li conditions="foo">
<p>Barney and Betty and Bam Bam.</p>
</li>
<li>
<p>Wilma</p>
</li>
</ol>

<h4>Intended output (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="foo"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;ol&gt; &lt;li&gt; &lt;p&gt;Fred&lt;/p&gt; &lt;/li&gt; &lt;li conditions="foo"&gt; &lt;p&gt;Barney and Betty and Bam Bam.&lt;/p&gt; &lt;/li&gt; &lt;li&gt; &lt;p&gt;Wilma&lt;/p&gt; &lt;/li&gt; &lt;/ol&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp385007380">Test: Block inserts</h2>

<p>An insert creates an instruction to insert something into the document.</p>


<h3 id="idp385005588">Case: Image insert</h3>

<p>Insert an image.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;(image foo.gif)(?goo)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert conditions="goo" item="foo.gif" type="image"></insert>

<h4>Intended output (space normalized)</h4>
<pre>&lt;insert conditions="goo" item="foo.gif" type="image"/&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert conditions="goo" item="foo.gif" type="image"/&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp385006100">Case: Key insert</h3>

<p>Insert the value of a key. Syntax for creating keys is left to the language designer. Key resolution belongs to the application layer.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;(%glug)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert item="glug" type="key"></insert>

<h4>Intended output (space normalized)</h4>
<pre>&lt;insert item="glug" type="key"/&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert item="glug" type="key"/&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp385014676">Test: Inline inserts</h2>

<p>Inline inserts are an instructions to insert something into the middle of a paragraph.</p>


<h3 id="idp385019540">Case: Inline inserts</h3>

<p>Inline inserts.</p>

<h4>Source</h4>
<pre>
Because you often want to &gt;(image "foo.gif")(#bar)(?baz)(?bat) change some part of a text when it is being
reused, &lt;fragments&gt; &amp; fragment references can both define local {strings}(feature).
Any {string references}(feature) inside a fragment will be resolved by looking first
at local-strings defined in the &gt;(*my-table) fragment reference, then at local strings defined
in the fragment definition, and then at global strings. In effect, this means
that you can define string substitutions whenever you insert a fragment into your content.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>Because you often want to <inline-insert conditions="baz,bat" item="foo.gif" name="bar" type="image"></inline-insert> change some part of a text when it is being reused, &lt;fragments&gt; &amp; fragment references can both define local <span style="color: green"><span style="color: red">strings</span></span>. Any <span style="color: green"><span style="color: red">string references</span></span> inside a fragment will be resolved by looking first at local-strings defined in the <inline-insert item="my-table" type="id"></inline-insert> fragment reference, then at local strings defined in the fragment definition, and then at global strings. In effect, this means that you can define string substitutions whenever you insert a fragment into your content.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;Because you often want to &lt;inline-insert conditions="baz,bat" item="foo.gif" name="bar" type="image"/&gt; change some part of a text when it is being reused, &amp;lt;fragments&amp;gt; &amp;amp; fragment references can both define local &lt;phrase&gt;&lt;annotation type="feature"&gt;strings&lt;/annotation&gt;&lt;/phrase&gt;. Any &lt;phrase&gt;&lt;annotation type="feature"&gt;string references&lt;/annotation&gt;&lt;/phrase&gt; inside a fragment will be resolved by looking first at local-strings defined in the &lt;inline-insert item="my-table" type="id"/&gt; fragment reference, then at local strings defined in the fragment definition, and then at global strings. In effect, this means that you can define string substitutions whenever you insert a fragment into your content.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;Because you often want to &lt;inline-insert conditions="baz,bat" item="foo.gif" name="bar" type="image"/&gt; change some part of a text when it is being reused, &amp;lt;fragments&amp;gt; &amp;amp; fragment references can both define local &lt;phrase&gt;&lt;annotation type="feature"&gt;strings&lt;/annotation&gt;&lt;/phrase&gt;. Any &lt;phrase&gt;&lt;annotation type="feature"&gt;string references&lt;/annotation&gt;&lt;/phrase&gt; inside a fragment will be resolved by looking first at local-strings defined in the &lt;inline-insert item="my-table" type="id"/&gt; fragment reference, then at local strings defined in the fragment definition, and then at global strings. In effect, this means that you can define string substitutions whenever you insert a fragment into your content.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp385022356">Case: Paragraph that is just an inline insert</h3>

<p>An inline insert on a line by itself creates a paragraph containing an insert, rather than a standalone insert instruction.</p>

<h4>Source</h4>
<pre>
&gt;(#foo)
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p><inline-insert item="foo" type="name"></inline-insert></p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;&lt;inline-insert item="foo" type="name"/&gt;&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;&lt;inline-insert item="foo" type="name"/&gt;&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp385033748">Test: Strings</h2>

<p>A string is a variable that can contain text, including annotations and citations.</p>


<h3 id="idp385034388">Case: String definition</h3>

<p>A string definition.</p>

<h4>Source</h4>
<pre>
$foo = bar bar black sheep
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<string name="foo">bar bar black sheep</string>

<h4>Intended output (space normalized)</h4>
<pre>&lt;string name="foo"&gt;bar bar black sheep&lt;/string&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;string name="foo"&gt;bar bar black sheep&lt;/string&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp385035668">Case: String references</h3>

<p>Inserting the value of a string.</p>

<h4>Source</h4>
<pre>
This sentence includes a string reference &gt;(string name). And a shortcut version &gt;($name).
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This sentence includes a string reference <inline-insert item="name" type="string"></inline-insert>. And a shortcut version <inline-insert item="name" type="string"></inline-insert>.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This sentence includes a string reference &lt;inline-insert item="name" type="string"/&gt;. And a shortcut version &lt;inline-insert item="name" type="string"/&gt;.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This sentence includes a string reference &lt;inline-insert item="name" type="string"/&gt;. And a shortcut version &lt;inline-insert item="name" type="string"/&gt;.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp385045524">Test: Fragments</h2>

<p>Fragments are sequences of paragraphs that can have management metadata applied to them and that can be inserted in other places.</p>


<h3 id="idp385044756">Case: Fragment</h3>

<p>A fragment definition.</p>

<h4>Source</h4>
<pre>
~~~(#foo3)(?gruz-natz)
    $a=apple
    $b=banana

    This is a sentence inside a fragment.

    ~~~(#gruznatz)
        $p=peach

        This is a nested fragment.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<fragment conditions="gruz-natz" name="foo3">
<string name="a">apple</string>
<string name="b">banana</string>
<p>This is a sentence inside a fragment.</p>
<fragment name="gruznatz">
<string name="p">peach</string>
<p>This is a nested fragment.</p>
</fragment>
</fragment>

<h4>Intended output (space normalized)</h4>
<pre>&lt;fragment conditions="gruz-natz" name="foo3"&gt; &lt;string name="a"&gt;apple&lt;/string&gt; &lt;string name="b"&gt;banana&lt;/string&gt; &lt;p&gt;This is a sentence inside a fragment.&lt;/p&gt; &lt;fragment name="gruznatz"&gt; &lt;string name="p"&gt;peach&lt;/string&gt; &lt;p&gt;This is a nested fragment.&lt;/p&gt; &lt;/fragment&gt; &lt;/fragment&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;fragment conditions="gruz-natz" name="foo3"&gt; &lt;string name="a"&gt;apple&lt;/string&gt; &lt;string name="b"&gt;banana&lt;/string&gt; &lt;p&gt;This is a sentence inside a fragment.&lt;/p&gt; &lt;fragment name="gruznatz"&gt; &lt;string name="p"&gt;peach&lt;/string&gt; &lt;p&gt;This is a nested fragment.&lt;/p&gt; &lt;/fragment&gt; &lt;/fragment&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384792084">Case: Insert a fragment</h3>

<p>An instruction to insert a fragment. Note that actually resolving an inserting the fragment is a job for the application layer.</p>

<h4>Source</h4>
<pre>
&gt;&gt;&gt;(~foobar)
    $a=apricot
    $b=breadfruit
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<insert item="foobar" type="fragment">
<string name="a">apricot</string>
<string name="b">breadfruit</string>
</insert>

<h4>Intended output (space normalized)</h4>
<pre>&lt;insert item="foobar" type="fragment"&gt; &lt;string name="a"&gt;apricot&lt;/string&gt; &lt;string name="b"&gt;breadfruit&lt;/string&gt; &lt;/insert&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;insert item="foobar" type="fragment"&gt; &lt;string name="a"&gt;apricot&lt;/string&gt; &lt;string name="b"&gt;breadfruit&lt;/string&gt; &lt;/insert&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384791700">Test: XML fragments</h2>

<p>You can insert a fragment of XML. It must be well formed and must start with an XML header. It must be UTF-8. It will be copied to output verbatim, minus the XML header.</p>


<h3 id="idp384787604">Case: XML fragment</h3>

<p>A chunk of XML.</p>

<h4>Source</h4>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;foo bar="bat"&gt;
    &lt;boo/&gt;
    &lt;hoo/&gt;
&lt;/foo&gt;
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
                <foo bar="bat">
                    <boo></boo>
                    <hoo></hoo>
                </foo>


<h4>Intended output (space normalized)</h4>
<pre>&lt;foo bar="bat"&gt; &lt;boo/&gt; &lt;hoo/&gt; &lt;/foo&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;foo bar="bat"&gt; &lt;boo/&gt; &lt;hoo/&gt; &lt;/foo&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
<h2 id="idp384798100">Test: Smart quotes</h2>

<p>Smart quotes is an optional feature of the parser, not a feature of the SAM language. It turns straight quotes into curly quotes. It raises a warning when it cant figure out how to handle a case. The algorithm could be improved in the future to handle more cases correctly.</p>
<p>The canonical way to handle quotes in SAM is to use real curly quotes to begin with. All SAM documents are UTF-8.</p>
<Note>These tests will fail if smart quotes is not selected</Note>
<p>using the <span style="color: green"><tt>-q</tt></span> option of the parser command line or by setting the <span style="color: green"><tt>smart_quotes</tt></span> attribute of the SamParser object to <span style="color: green"><tt>True</tt></span>.</p>


<h3 id="idp384807316">Case: Smart quotes</h3>

<p>Paragraphs illustrating most of the cases where smart quotes should be recognized in ordinary English.</p>

<h4>Source</h4>
<pre>
"For once, 'sir' adding, 'you're making a
scene.'" and "For once, 'sir' adding,
'you're making a scene.'" In the winter
of 65. "Yes," he said, "I met her. She's
very 'friendly.'" '"I dont know what you
mean by 'glory,'" Alice said.' "'I dont
know what you mean by "glory,"' Alice said."

For "the Duke", perhaps?
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>For once, sir adding, youre making a scene. and For once, sir adding, youre making a scene. In the winter of 65. Yes, he said, I met her. Shes very friendly. I dont know what you mean by glory, Alice said. I dont know what you mean by glory, Alice said.</p>
<p>For the Duke, perhaps?</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;For once, sir adding, youre making a scene. and For once, sir adding, youre making a scene. In the winter of 65. Yes, he said, I met her. Shes very friendly. I dont know what you mean by glory, Alice said. I dont know what you mean by glory, Alice said.&lt;/p&gt; &lt;p&gt;For the Duke, perhaps?&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;For once, sir adding, youre making a scene. and For once, sir adding, youre making a scene. In the winter of 65. Yes, he said, I met her. Shes very friendly. I dont know what you mean by glory, Alice said. I dont know what you mean by glory, Alice said.&lt;/p&gt; &lt;p&gt;For the Duke, perhaps?&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384806932">Case: Following an annotation</h3>

<p>Smart quotes also need to be recognized when they follow SAM markup.</p>

<h4>Source</h4>
<pre>
interpretations of the `xref`'s instruction
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>interpretations of the <span style="color: green"><tt>xref</tt></span>s instruction</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;interpretations of the &lt;phrase&gt;&lt;annotation type="code"&gt;xref&lt;/annotation&gt;&lt;/phrase&gt;s instruction&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;interpretations of the &lt;phrase&gt;&lt;annotation type="code"&gt;xref&lt;/annotation&gt;&lt;/phrase&gt;s instruction&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384813972">Case: Smart quotes with annotations</h3>

<p>Smart quotes surrounding annotated phrases.</p>

<h4>Source</h4>
<pre>
"For once, '{sir}(salutation)' adding, 'you're making a
scene.'" and "For once, {'sir'}(salutation) adding,
'you're making a scene.'" In the winter
of 65. "Yes," he said, "I met her. She's
very 'friendly.'" '"I dont know what you
mean by 'glory,'" Alice said.' "'I dont
know what you mean by "glory,"' Alice said."
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>For once, <span style="color: green"><span style="color: red">sir</span></span> adding, youre making a scene. and For once, <span style="color: green"><span style="color: red">sir</span></span> adding, youre making a scene. In the winter of 65. Yes, he said, I met her. Shes very friendly. I dont know what you mean by glory, Alice said. I dont know what you mean by glory, Alice said.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;For once, &lt;phrase&gt;&lt;annotation type="salutation"&gt;sir&lt;/annotation&gt;&lt;/phrase&gt; adding, youre making a scene. and For once, &lt;phrase&gt;&lt;annotation type="salutation"&gt;sir&lt;/annotation&gt;&lt;/phrase&gt; adding, youre making a scene. In the winter of 65. Yes, he said, I met her. Shes very friendly. I dont know what you mean by glory, Alice said. I dont know what you mean by glory, Alice said.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;For once, &lt;phrase&gt;&lt;annotation type="salutation"&gt;sir&lt;/annotation&gt;&lt;/phrase&gt; adding, youre making a scene. and For once, &lt;phrase&gt;&lt;annotation type="salutation"&gt;sir&lt;/annotation&gt;&lt;/phrase&gt; adding, youre making a scene. In the winter of 65. Yes, he said, I met her. Shes very friendly. I dont know what you mean by glory, Alice said. I dont know what you mean by glory, Alice said.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384813588">Case: Adjacent to parentheses</h3>

<p>Quotes inside parentheses.</p>

<h4>Source</h4>
<pre>
A vector graphic program creates graphics as a collection of  objects ("vector" meaning the mathematical representation of a shape or line).

The shape of the characters (technically, "glyphs") that make up the font are stored separately in font files.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>A vector graphic program creates graphics as a collection of  objects (vector meaning the mathematical representation of a shape or line).</p>
<p>The shape of the characters (technically, glyphs) that make up the font are stored separately in font files.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;A vector graphic program creates graphics as a collection of objects (vector meaning the mathematical representation of a shape or line).&lt;/p&gt; &lt;p&gt;The shape of the characters (technically, glyphs) that make up the font are stored separately in font files.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;A vector graphic program creates graphics as a collection of objects (vector meaning the mathematical representation of a shape or line).&lt;/p&gt; &lt;p&gt;The shape of the characters (technically, glyphs) that make up the font are stored separately in font files.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384820884">Case: Close quote followed by citation.</h3>

<p>Close quote followed by citation.</p>

<h4>Source</h4>
<pre>
"What is truth?"[John 18:38]
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>What is truth?<span style="color: brown">[John 18:38]</span></p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;What is truth?&lt;citation type="citation" value="John 18:38"/&gt;&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;What is truth?&lt;citation type="citation" value="John 18:38"/&gt;&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384823444">Case: Miscellaneous cases</h3>

<p>A bunch of miscellaneous cases.</p>

<h4>Source</h4>
<pre>
"title"?

{DocBook}(language)'s

{DITA}(language) and {DocBook}'s
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>title?</p>
<p><span style="color: green"><span style="color: red">DocBook</span></span>s</p>
<p><span style="color: green"><span style="color: red">DITA</span></span> and <span style="color: green"><span style="color: red">DocBook</span></span>s</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;title?&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="language"&gt;DocBook&lt;/annotation&gt;&lt;/phrase&gt;s&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="language"&gt;DITA&lt;/annotation&gt;&lt;/phrase&gt; and &lt;phrase&gt;&lt;annotation type="language"&gt;DocBook&lt;/annotation&gt;&lt;/phrase&gt;s&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;title?&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="language"&gt;DocBook&lt;/annotation&gt;&lt;/phrase&gt;s&lt;/p&gt; &lt;p&gt;&lt;phrase&gt;&lt;annotation type="language"&gt;DITA&lt;/annotation&gt;&lt;/phrase&gt; and &lt;phrase&gt;&lt;annotation type="language"&gt;DocBook&lt;/annotation&gt;&lt;/phrase&gt;s&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384832148">Case: Escaped dumb quotes</h3>

<p>If you want to enter straight quotes and have them stay straight when smart quotes are applied, you have to escape them with <span style="color: green"><tt>\</tt></span> or use the <span style="color: green"><tt>&amp;quot;</tt></span> character entity.</p>

<h4>Source</h4>
<pre>
This para uses \"dumb\" quotes. Don\'t get them &amp;quot;mixed up&amp;quot;.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This para uses "dumb" quotes. Don't get them "mixed up".</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This para uses "dumb" quotes. Don't get them "mixed up".&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This para uses "dumb" quotes. Don't get them "mixed up".&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>


<h3 id="idp384841108">Case: Em and en dashes</h3>

<p>The smart quote feature will also transform double hyphens surrounded by spaces and triple hyphens surrounded by letters into en and em dashes respectively.</p>

<h4>Source</h4>
<pre>
This para contains -- an en dash and an---em dash.
</pre>

<h4>Formatted output (not necessarily supported for all tests)</h4>
<p>This para contains  an en dash and anem dash.</p>
<p>This para contains  <span style="color: green"><span style="color: red">an</span></span> en dash and an<span style="color: green"><span style="color: red">em</span></span> dash.</p>
<p>This para <span style="color: green"><span style="color: red">contains</span></span>  an en dash and <span style="color: green"><span style="color: red">an</span></span>em dash.</p>
<p>This para <span style="color: green"><b>contains</b></span>  an en dash and <span style="color: green"><i>an</i></span>em dash.</p>
<p>This para <span style="color: green"><tt>contains</tt></span>  an en dash and anem dash.</p>
<p>This para contains  an en dash and <span style="color: green"><tt>an</tt></span>em dash.</p>

<h4>Intended output (space normalized)</h4>
<pre>&lt;p&gt;This para contains  an en dash and anem dash.&lt;/p&gt; &lt;p&gt;This para contains  &lt;phrase&gt;&lt;annotation type="word"&gt;an&lt;/annotation&gt;&lt;/phrase&gt; en dash and an&lt;phrase&gt;&lt;annotation type="word"&gt;em&lt;/annotation&gt;&lt;/phrase&gt; dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="word"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt;  an en dash and &lt;phrase&gt;&lt;annotation type="word"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;em dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="bold"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt;  an en dash and &lt;phrase&gt;&lt;annotation type="italic"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;em dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="code"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt;  an en dash and anem dash.&lt;/p&gt; &lt;p&gt;This para contains  an en dash and &lt;phrase&gt;&lt;annotation type="code"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;em dash.&lt;/p&gt;</pre>
<h4>Actual output  (space normalized)</h4>
<pre>&lt;p&gt;This para contains  an en dash and anem dash.&lt;/p&gt; &lt;p&gt;This para contains  &lt;phrase&gt;&lt;annotation type="word"&gt;an&lt;/annotation&gt;&lt;/phrase&gt; en dash and an&lt;phrase&gt;&lt;annotation type="word"&gt;em&lt;/annotation&gt;&lt;/phrase&gt; dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="word"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt;  an en dash and &lt;phrase&gt;&lt;annotation type="word"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;em dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="bold"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt;  an en dash and &lt;phrase&gt;&lt;annotation type="italic"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;em dash.&lt;/p&gt; &lt;p&gt;This para &lt;phrase&gt;&lt;annotation type="code"&gt;contains&lt;/annotation&gt;&lt;/phrase&gt;  an en dash and anem dash.&lt;/p&gt; &lt;p&gt;This para contains  an en dash and &lt;phrase&gt;&lt;annotation type="code"&gt;an&lt;/annotation&gt;&lt;/phrase&gt;em dash.&lt;/p&gt;</pre>
<h4>Test result</h4>
<p style="color: green; font-weight: bold">PASS</p>

<a href="#top">^top</a>
</body>
</html>
